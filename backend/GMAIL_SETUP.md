# Gmail 郵件通知設定說明

## 功能說明

當客戶在網站上提交訂單後,系統會自動發送訂單通知郵件到您的Gmail信箱 (robinwang707@gmail.com)。

## 設定步驟

### 1. 建立Gmail應用程式專用密碼

由於Gmail已停用「低安全性應用程式存取權」,您需要使用「應用程式專用密碼」來發送郵件。

步驟如下:

1. 登入您的Google帳戶 (robinwang707@gmail.com)
2. 前往 https://myaccount.google.com/security
3. 確保已啟用「兩步驟驗證」(這是使用應用程式密碼的前提)
4. 在「兩步驟驗證」下方,找到「應用程式密碼」
5. 選擇「郵件」和「其他(自訂名稱)」,輸入「聚寶風水網」
6. 點擊「產生」,Google會顯示一組16位數的密碼
7. **重要**: 複製這組密碼,它只會顯示一次

### 2. 設定環境變數

在伺服器上設定以下環境變數:

```bash
export GMAIL_USER="robinwang707@gmail.com"
export GMAIL_APP_PASSWORD="您的16位數應用程式密碼"
```

或者在 `/home/ubuntu/fengshui_backend/.env` 檔案中設定:

```
GMAIL_USER=robinwang707@gmail.com
GMAIL_APP_PASSWORD=您的16位數應用程式密碼
```

### 3. 更新後端程式

後端程式已經準備好使用這些環境變數來發送郵件。當設定完成後,系統會自動發送訂單通知。

## 郵件內容

訂單通知郵件包含以下資訊:

- 訂單編號
- 訂單時間
- 客戶資訊(姓名、電話、Email、地址)
- 訂購項目明細
- 總金額
- 付款方式
- 服務類型(如有)
- 客戶備註(如有)

## 測試郵件功能

設定完成後,您可以:

1. 在網站上提交一筆測試訂單
2. 檢查 robinwang707@gmail.com 是否收到訂單通知郵件
3. 如果沒有收到,請檢查伺服器日誌

## 注意事項

- 應用程式密碼只會顯示一次,請妥善保管
- 如果忘記密碼,可以刪除舊的並重新產生新的
- 郵件發送功能目前已整合在訂單建立流程中
- 即使郵件發送失敗,訂單仍會正常建立並儲存在資料庫中

## 疑難排解

如果郵件無法發送,請檢查:

1. 環境變數是否正確設定
2. Gmail應用程式密碼是否正確
3. 伺服器是否可以連接到 smtp.gmail.com:587
4. 防火牆是否阻擋SMTP連線

## 聯絡支援

如有任何問題,請聯繫技術支援。

